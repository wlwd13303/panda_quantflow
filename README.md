# PandaAI Quantflow é‡åŒ–å·¥ä½œæµå¹³å°

## æ¦‚è¿°

**PandaAI QuantFlow** æ˜¯ä¸€ä¸ªé›†æˆçš„é‡åŒ–äº¤æ˜“å’Œæœºå™¨å­¦ä¹ å·¥ä½œæµå¹³å°ï¼Œæ—¨åœ¨ä¸ºé‡åŒ–ç ”ç©¶äººå‘˜æä¾›å®Œæ•´çš„ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆï¼Œé™ä½AIé—¨æ§›ï¼Œæ‰“ç ´ä¼ ç»Ÿé‡åŒ–é«˜é—¨æ§›å£å’ï¼Œè®©ä¸»è§‚äº¤æ˜“è€…ã€å­¦ç”Ÿä¹ƒè‡³æ™®é€šæŠ•èµ„è€…éƒ½èƒ½å‚ä¸ç­–ç•¥ç ”å‘ã€‚
![é¢„è§ˆ](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/d712ad04032a0d70ea468cc1bfd0d144.png)
![é¢„è§ˆ](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/127c169482041aa8bd619a074665d8e2.png)
![é¢„è§ˆ](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/47f670c2e1c1d45a593cb3f6b2d707ef.png)
![é¢„è§ˆ](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/a5a35c798f3138bdbd145d647abaedee.png)


### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

**ğŸ”§ å¯è§†åŒ–å·¥ä½œæµç¼–æ’**
- åŸºäºèŠ‚ç‚¹çš„å¯è§†åŒ–å·¥ä½œæµè®¾è®¡å™¨ï¼Œæ”¯æŒæ‹–æ‹½å¼æ„å»ºå¤æ‚çš„é‡åŒ–ç ”ç©¶å’Œäº¤æ˜“ç­–ç•¥æµç¨‹
- ä¸°å¯Œçš„å†…ç½®å·¥ä½œèŠ‚ç‚¹ï¼Œæ¶µç›–æ•°æ®å¤„ç†ã€ç‰¹å¾å·¥ç¨‹ã€æœºå™¨å­¦ä¹ ã€å› å­åˆ†æå’Œå›æµ‹ç­‰å„ä¸ªç¯èŠ‚
- çµæ´»çš„æ’ä»¶ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰å·¥ä½œèŠ‚ç‚¹å¼€å‘å’Œæ‰©å±•

**ğŸ¤– æœºå™¨å­¦ä¹ é›†æˆ**
- æ”¯æŒä¸»æµæœºå™¨å­¦ä¹ ç®—æ³•ï¼šXGBoostã€LightGBMã€RandomForestã€SVMã€ç¥ç»ç½‘ç»œç­‰
- æä¾›å¤šä»»åŠ¡å­¦ä¹ (MTL)å’Œæ·±åº¦å­¦ä¹ è§£å†³æ–¹æ¡ˆ
- è‡ªåŠ¨åŒ–æ¨¡å‹è®­ç»ƒã€éªŒè¯å’Œé¢„æµ‹æµç¨‹

**ğŸ“ˆ å› å­åˆ†æä¸å›æµ‹ç­–ç•¥éªŒè¯**
- é«˜æ€§èƒ½å›æµ‹å¼•æ“ï¼Œæ”¯æŒè‚¡ç¥¨ã€æœŸè´§
- å®Œæ•´çš„äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œç²¾ç¡®æ¨¡æ‹ŸçœŸå®äº¤æ˜“ç¯å¢ƒ
- å…¼å®¹PandaFactoråˆ†ææ¡†æ¶

**ğŸŒ ä¼ä¸šçº§æœåŠ¡æ¶æ„**
- åŸºäºFastAPIçš„é«˜æ€§èƒ½REST APIæœåŠ¡
- æ”¯æŒå¤šç”¨æˆ·å·¥ä½œæµç®¡ç†å’Œæƒé™æ§åˆ¶
- åˆ†å¸ƒå¼ä»»åŠ¡æ‰§è¡Œï¼Œæ”¯æŒäº‘ç«¯å’Œæœ¬åœ°éƒ¨ç½²
- å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿå’Œå®æ—¶ç›‘æ§

### ğŸ¯ é€‚ç”¨åœºæ™¯

- **é‡åŒ–ç ”ç©¶**ï¼šå› å­æŒ–æ˜ã€ç­–ç•¥å¼€å‘ã€æ¨¡å‹éªŒè¯
- **ç®—æ³•äº¤æ˜“**ï¼šç­–ç•¥å›æµ‹ã€å®ç›˜éªŒè¯ã€é£é™©ç®¡ç†
- **é‡‘èæ•°æ®åˆ†æ**ï¼šå¸‚åœºç ”ç©¶ã€æŠ•èµ„ç»„åˆä¼˜åŒ–
- **æœºå™¨å­¦ä¹ åº”ç”¨**ï¼šé‡‘èé¢„æµ‹æ¨¡å‹ã€æ™ºèƒ½æŠ•é¡¾

### ğŸ’¡ æŠ€æœ¯ç‰¹è‰²

- **å¾®æœåŠ¡æ¶æ„**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **æ’ä»¶åŒ–è®¾è®¡**ï¼šé€šè¿‡ `@work_node` è£…é¥°å™¨è½»æ¾å¼€å‘è‡ªå®šä¹‰èŠ‚ç‚¹
- **å·¥ä½œæµæ”¯æŒjsonå¯¼å…¥å¯¼å‡º**ï¼šé€šè¿‡jsonæ–‡ä»¶å¿«é€Ÿä¼ æ’­å’Œå¤ç°å·¥ä½œæµ
- **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šæ”¯æŒDockerå’ŒDocker Composeå¿«é€Ÿéƒ¨ç½²


## å·²è§„åˆ’åŠŸèƒ½ï¼Œæ¬¢è¿åŠ ç¾¤å†…æµ‹
LLMæ”¯æŒ

APIä»£ç å¼è°ƒç”¨å·¥ä½œæµ

CTPå®ç›˜äº¤æ˜“

QMTå®ç›˜äº¤æ˜“

æ•°å­—è´§å¸æ”¯æŒ

## æœåŠ¡å®‰è£…ä¸è¿è¡Œ

### å®‰è£…åŒ…æ–¹å¼ (ç®€å•ï¼Œå¿«é€Ÿä½“éªŒ)
- è‹¥æ˜¯æ‚¨ä¸æƒ³èŠ±æ—¶é—´æ­ç¯å¢ƒï¼Œå¯ä»¥ç”¨æˆ‘ä»¬æ‰“åŒ…å¥½çš„å®¢æˆ·ç«¯ï¼Œä¸€é”®è§£å‹ï¼Œå¯ç›´æ¥è¿è¡Œï¼Œå› ä¸ºå†…ç½®æ•°æ®åº“å’Œè¡Œæƒ…æ•°æ®ï¼Œæ–‡ä»¶ç•¥å¤§ã€‚
![é¢„è§ˆ](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/2a1a5cbb2a997f0f143192dc083cd906.png)
å†…å«å·¥ä½œæµã€è¶…çº§å›¾è¡¨ã€å› å­æ¨¡å—ã€‚
- **MacOS ç³»ç»Ÿ**: [å‡†å¤‡ä¸­]
- **Windows ç³»ç»Ÿ**: [ä¸‹è½½ Windows å®‰è£…åŒ…](https://github.com/PandaAI-Tech/panda_quantflow/releases)ï¼ˆå› ä¸ºæ–‡ä»¶å¤§å°é™åˆ¶ï¼Œåšäº†åˆ†åŒ…ï¼Œè¯·ä¸‹è½½å…¨éƒ¨æ–‡ä»¶å†è§£å‹ï¼‰


### ä»æºç å®‰è£…ï¼ˆé«˜åº¦è‡ªå®šä¹‰ï¼Œé€‚åˆäºŒæ¬¡å¼€å‘ï¼‰
#### å‰ç½®æ¡ä»¶
1. å®‰è£… ANACONDA ç¯å¢ƒ ([å®˜ç½‘ä¸‹è½½](https://www.anaconda.com/download))
2. å®‰è£… panda_factor ç›¸å…³ä¾èµ–ï¼Œå¹¶ä¸”å¯åŠ¨factoræœåŠ¡
   ```bash
   git clone https://github.com/PandaAI-Tech/panda_factor.git
   cd panda_factor
   pip install -e panda_factor ./panda_common ./panda_data_hub ./panda_data
   python ./panda_server/panda_server/server.py
   ```
   panda_factorè¿˜æœ‰è‹¥å¹²åŠŸèƒ½ï¼Œä¾‹å¦‚æ•°æ®è‡ªåŠ¨æ›´æ–°ç­‰ï¼Œå…·ä½“è¯·æŸ¥çœ‹([PandaFactor](https://github.com/PandaAI-Tech/panda_factor))
3. ä¸‹è½½å¹¶å¯åŠ¨PandaAIæä¾›çš„æ•°æ®åº“(å«æœ‰è¡Œæƒ…æ•°æ®)<br>
   è¯·è”ç³»å°åŠ©ç†ä»ç½‘ç›˜ä¸‹è½½æœ€æ–°çš„æ•°æ®åº“
   - **MacOS ç³»ç»Ÿ**: ä¸‹è½½å¹¶è§£å‹åè¿è¡Œ `bin/mongod -replSet rs0 --dbpath data\db  --keyFile conf\mongo.key --port 27017 --quiet --auth`
   - **Windows ç³»ç»Ÿ**: ä¸‹è½½å¹¶è§£å‹åè¿è¡Œ `bin\mongod.exe --replSet rs0 --dbpath data\db  --keyFile conf\mongo.key --port 27017 --quiet --auth`
   - å¯†ç è¾“å…¥ï¼španda
  
#### å®‰è£…æµç¨‹
1. å®‰è£… panda_quantflow
   ```bash
   git clone https://github.com/PandaAI-Tech/panda_quantflow.git
   cd panda_workflow
   pip install -e .
   ```
2. å¯åŠ¨ panda_quantflow æœåŠ¡
   ```bash
   python src/panda_server/main.py
   ```
3. æ‰“å¼€ UI å›¾å½¢ç•Œé¢
   ```bash
   è¶…çº§å›¾è¡¨ï¼šhttp://127.0.0.1:8000/charts/
   å·¥ä½œæµï¼šhttp://127.0.0.1:8000/quantflow/
   ```

## ç¼–å†™è‡ªå®šä¹‰æ’ä»¶
- å¼€å‘è€…å¯ä»¥åœ¨é¡¹ç›®ç›®å½•`.src/panda_plugins/custom/`ä¸­ç¼–å†™è‡ªå®šä¹‰æ’ä»¶, ä»¥åœ¨å·¥ä½œæµä¸­ä½¿ç”¨
- è‡ªå®šä¹‰æ’ä»¶éœ€è¦ç»§æ‰¿ `BaseWorkNode` å¹¶å®ç° `input_model`, `output_model` å’Œ `run` 3 ä¸ªæ–¹æ³•
- è‡ªå®šä¹‰æ’ä»¶ç¤ºä¾‹ (æ›´å¤šç¤ºä¾‹åœ¨`.src/panda_plugins/custom/examples/`ä¸­)
   ```python
   from typing import Optional, Type
   from panda_plugins.base import BaseWorkNode, work_node
   from pydantic import BaseModel

   class InputModel(BaseModel):
      """
      Define the input model for the node.
      Use pydantic to define, which is a library for data validation and parsing.
      Reference: https://pydantic-docs.helpmanual.io
      
      
      ä¸ºå·¥ä½œèŠ‚ç‚¹å®šä¹‰è¾“å…¥æ¨¡å‹.
      ä½¿ç”¨ Pydantic å®šä¹‰, Pydantic æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®éªŒè¯å’Œè§£æçš„åº“.
      å‚è€ƒæ–‡æ¡£: https://pydantic-docs.helpmanual.io
      """
      number1: int
      number2: int

   class OutputModel(BaseModel):
      """
      Define the output model for the node.
      Use pydantic to define, which is a library for data validation and parsing.
      Reference: https://pydantic-docs.helpmanual.io
      
      ä¸ºå·¥ä½œèŠ‚ç‚¹å®šä¹‰è¾“å‡ºæ¨¡å‹.
      ä½¿ç”¨ Pydantic å®šä¹‰, Pydantic æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®éªŒè¯å’Œè§£æçš„åº“.
      å‚è€ƒæ–‡æ¡£: https://pydantic-docs.helpmanual.io
      """
      result: int

   @work_node(name="ç¤ºä¾‹-ä¸¤æ•°æ±‚å’Œ", group="æµ‹è¯•èŠ‚ç‚¹")
   class ExamplePluginAddition(BaseWorkNode):
      """
      Implement a example node, which can add two numbers and return the result.
      å®ç°ä¸€ä¸ªç¤ºä¾‹èŠ‚ç‚¹, å®Œæˆä¸€ä¸ªç®€å•çš„åŠ æ³•è¿ç®—, è¾“å…¥ 2 ä¸ªæ•°å€¼, è¾“å‡º 2 ä¸ªæ•°å€¼çš„å’Œ.
      """

      # Return the input model
      # è¿”å›è¾“å…¥æ¨¡å‹
      @classmethod
      def input_model(cls) -> Optional[Type[BaseModel]]:
         return InputModel

      # Return the output model
      # è¿”å›è¾“å‡ºæ¨¡å‹
      @classmethod
      def output_model(cls) -> Optional[Type[BaseModel]]:
         return OutputModel

      # Node running logic
      # èŠ‚ç‚¹è¿è¡Œé€»è¾‘
      def run(self, input: BaseModel) -> BaseModel:
         result = input.number1 + input.number2
         return OutputModel(result=result)

   if __name__ == "__main__":
      node = ExamplePluginAddition()
      input = InputModel(number1=1, number2=2)
      print(node.run(input))
   ```
**æˆ‘ä»¬æ¬¢è¿æ¯ä¸€ä½ç”¨æˆ·åŠ å…¥èŠ‚ç‚¹è´¡çŒ®è¡Œåˆ—ï¼Œå…±åŒç‚¹ç‡ƒé‡åŒ–å¼€æºçš„ç«ç„°ğŸ”¥** 

**å¦‚æœæœ‰æ–°çš„èŠ‚ç‚¹éœ€æ±‚ï¼Œä¹Ÿæ¬¢è¿è¿›ç¾¤å‘Šè¯‰æˆ‘ä»¬ï¼Œåªè¦æœ‰åŠ©äºé¡¹ç›®å‘å±•ï¼Œæˆ‘ä»¬éƒ½æ„¿æ„å…è´¹æ”¯æŒå¼€å‘ã€‚**

## é¡¹ç›®ç»“æ„** 
```
panda_workflow/
â”œâ”€â”€ src/                    # æ‰€æœ‰æºä»£ç 
â”‚   â”œâ”€â”€ common/             # é€šç”¨å·¥å…·å’Œé…ç½®
â”‚   â”œâ”€â”€ panda_ml/           # æœºå™¨å­¦ä¹ ç»„ä»¶
â”‚   â”œâ”€â”€ panda_plugins/      # æ’ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ panda_server/       # APIæœåŠ¡
â”‚   â”œâ”€â”€ panda_backtest/     # å›æµ‹ç³»ç»Ÿ
â”‚   â””â”€â”€ panda_trading/      # äº¤æ˜“æ‰§è¡Œç³»ç»Ÿ
â”œâ”€â”€ tests/                  # æµ‹è¯•ç›®å½•
â”œâ”€â”€ pyproject.toml          # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ Dockerfile              # Dockeré…ç½®
â””â”€â”€ docker-compose.yml      # Docker Composeé…ç½®
```

## åŠ ç¾¤ç­”ç–‘
![PandaAI äº¤æµç¾¤](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/wechat_2025-06-19_194038_941_%E5%89%AF%E6%9C%AC.png)

## å•†åŠ¡åˆä½œ
![å•†åŠ¡åˆä½œ](https://lyzj-ai.oss-cn-shanghai.aliyuncs.com/68747470733a2f2f7a796e662d746573742e6f73732d636e2d7368616e676861692e616c6979756e63732e636f6d2f6769746875622f575832303235303431362d3233313931392e706e67_%E5%89%AF%E6%9C%AC.png)

## è´¡çŒ®
æ¬¢è¿è´¡çŒ®ä»£ç ã€æå‡º Issue æˆ– PR:
- Fork æœ¬é¡¹ç›®
- æ–°å»ºåŠŸèƒ½åˆ†æ”¯ git checkout -b feature/AmazingFeature
- æäº¤æ›´æ”¹ git commit -m 'Add some AmazingFeature'
- æ¨é€åˆ†æ”¯ git push origin feature/AmazingFeature
- å‘èµ· Pull Request

## è‡´è°¢
æ„Ÿè°¢é‡åŒ–æä¸ç™½çš„ç²‰ä¸ä»¬å¯¹æˆ‘ä»¬çš„æ”¯æŒ<br>
æ„Ÿè°¢æ‰€æœ‰å¼€æºç¤¾åŒºçš„è´¡çŒ®è€…

## è®¸å¯è¯
æœ¬é¡¹ç›®é‡‡ç”¨ GPLV3 è®¸å¯è¯